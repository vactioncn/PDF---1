<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APIæ¥å£å’Œå‡½æ•°æ–‡æ¡£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
            padding: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .nav {
            background: #2d3748;
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .nav-links {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            list-style: none;
        }

        .nav-links a {
            color: #e2e8f0;
            text-decoration: none;
            font-size: 0.95rem;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: white;
        }

        .content {
            padding: 2rem;
        }

        section {
            margin-bottom: 3rem;
        }

        h2 {
            font-size: 1.8rem;
            color: #2d3748;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid #667eea;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        h3 {
            font-size: 1.4rem;
            color: #4a5568;
            margin: 2rem 0 1rem 0;
            padding-left: 1rem;
            border-left: 4px solid #667eea;
        }

        .api-item, .func-item {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .api-item:hover, .func-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .api-title, .func-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .method {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .method.get { background: #48bb78; color: white; }
        .method.post { background: #4299e1; color: white; }
        .method.delete { background: #f56565; color: white; }

        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .status-ok { background: #c6f6d5; color: #22543d; }
        .status-warning { background: #feebc8; color: #7c2d12; }
        .status-error { background: #fed7d7; color: #742a2a; }
        .status-important { background: #e9d8fd; color: #553c9a; }

        .info-grid {
            display: grid;
            grid-template-columns: 120px 1fr;
            gap: 0.75rem;
            margin: 1rem 0;
            font-size: 0.95rem;
        }

        .info-label {
            font-weight: 600;
            color: #4a5568;
        }

        .info-value {
            color: #2d3748;
        }

        .problem-history {
            background: #fff5f5;
            border-left: 4px solid #fc8181;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .problem-history h4 {
            color: #742a2a;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .problem-item {
            margin: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .problem-item::before {
            content: "â€¢";
            position: absolute;
            left: 0;
            color: #fc8181;
            font-weight: bold;
        }

        .problem-item.error::before { content: "âŒ"; }
        .problem-item.fix::before { content: "âœ…"; }

        .solution {
            background: #f0fff4;
            border-left: 4px solid #48bb78;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .solution h4 {
            color: #22543d;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        code {
            background: #edf2f7;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: "Monaco", "Menlo", "Consolas", monospace;
            font-size: 0.9em;
            color: #e53e3e;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            margin: 1rem 0;
            font-family: "Monaco", "Menlo", "Consolas", monospace;
            font-size: 0.9rem;
        }

        .summary-section {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 2rem;
            border-radius: 8px;
            margin: 2rem 0;
        }

        .summary-section h3 {
            color: white;
            border: none;
            padding: 0;
            margin-bottom: 1rem;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .summary-item {
            background: rgba(255,255,255,0.2);
            padding: 1rem;
            border-radius: 6px;
        }

        .summary-item h4 {
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .recommendations {
            background: #edf2f7;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 2rem 0;
        }

        .recommendations h3 {
            margin-top: 0;
            border: none;
            padding: 0;
        }

        .recommendation-item {
            margin: 1rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .recommendation-item::before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #48bb78;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .recommendation-item.avoid::before {
            content: "âœ—";
            color: #f56565;
        }

        .page-route {
            background: #e6fffa;
            border-left: 4px solid #38b2ac;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 4px;
        }

        .page-route strong {
            color: #2c7a7b;
        }

        @media print {
            .nav { display: none; }
            .api-item, .func-item { break-inside: avoid; }
        }

        @media (max-width: 768px) {
            header h1 { font-size: 1.8rem; }
            .content { padding: 1rem; }
            .info-grid { grid-template-columns: 1fr; }
            .nav-links { flex-direction: column; gap: 0.5rem; }
        }

        .toc {
            background: #f7fafc;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 2rem 0;
        }

        .toc h3 {
            margin-top: 0;
            border: none;
            padding: 0;
        }

        .toc ul {
            list-style: none;
            padding-left: 0;
        }

        .toc li {
            margin: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .toc li::before {
            content: "â†’";
            position: absolute;
            left: 0;
            color: #667eea;
        }

        .toc a {
            color: #4a5568;
            text-decoration: none;
            transition: color 0.3s;
        }

        .toc a:hover {
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“š APIæ¥å£å’Œå‡½æ•°æ–‡æ¡£</h1>
            <p>å®Œæ•´çš„æ¥å£è¯´æ˜ã€é—®é¢˜å†å²å’Œæœ€ä½³å®è·µæŒ‡å—</p>
        </header>

        <nav class="nav">
            <ul class="nav-links">
                <li><a href="#apis">APIæ¥å£</a></li>
                <li><a href="#functions">æ ¸å¿ƒå‡½æ•°</a></li>
                <li><a href="#pages">é¡µé¢è·¯ç”±</a></li>
                <li><a href="#summary">é—®é¢˜æ€»ç»“</a></li>
                <li><a href="#recommendations">ä½¿ç”¨å»ºè®®</a></li>
            </ul>
        </nav>

        <div class="content">
            <section id="apis">
                <h2>ğŸ“‹ APIæ¥å£åˆ—è¡¨</h2>

                <h3>ä¸€ã€PDF/EPUBè§£æç›¸å…³æ¥å£</h3>

                <div class="api-item">
                    <div class="api-title">
                        <span class="method post">POST</span>
                        <code>/api/parse/clean_toc</code>
                        <span class="status-badge status-ok">âœ… å·²ä¿®å¤</span>
                    </div>
                    <div class="info-grid">
                        <div class="info-label">åŠŸèƒ½ï¼š</div>
                        <div class="info-value">æ¸…æ´—ç›®å½•æ¥å£ï¼ˆæ”¯æŒPDFå’ŒEPUBï¼‰</div>
                        <div class="info-label">è¾“å…¥ï¼š</div>
                        <div class="info-value">æ–‡ä»¶ä¸Šä¼ </div>
                        <div class="info-label">è¾“å‡ºï¼š</div>
                        <div class="info-value">æ¸…æ´—åçš„ç›®å½•åˆ—è¡¨</div>
                    </div>
                    <div class="problem-history">
                        <h4>é—®é¢˜å†å²</h4>
                        <div class="problem-item error">EPUBè§£æé—®é¢˜ï¼šä¹‹å‰ç›´æ¥ä½¿ç”¨<code>BytesIO</code>ä¼ ç»™<code>epub.read_epub()</code>ä¼šæŠ¥é”™ï¼š<code>stat: path should be string, bytes, os.PathLike or integer, not BytesIO</code></div>
                        <div class="problem-item fix">ä¿®å¤æ–¹æ¡ˆï¼šæ”¹ç”¨ä¸´æ—¶æ–‡ä»¶ï¼Œå…ˆå†™å…¥ä¸´æ—¶æ–‡ä»¶ï¼Œå†ä¼ ç»™<code>epub.read_epub()</code>ï¼Œä½¿ç”¨å®Œååˆ é™¤ä¸´æ—¶æ–‡ä»¶ï¼ˆè§ä»£ç 2574-2585è¡Œï¼‰</div>
                    </div>
                    <div class="solution">
                        <h4>è§£å†³çš„é—®é¢˜</h4>
                        <p>å°†PDF/EPUBçš„åŸå§‹ç›®å½•é€šè¿‡LLMæ¸…æ´—ï¼Œå»é™¤ç‰ˆæƒé¡µã€åºè¨€ç­‰éæ­£æ–‡ç« èŠ‚ï¼Œç”Ÿæˆå¹²å‡€çš„ç›®å½•ç»“æ„</p>
                    </div>
                </div>

                <div class="api-item">
                    <div class="api-title">
                        <span class="method post">POST</span>
                        <code>/api/parse/debug_toc</code>
                        <span class="status-badge status-ok">âœ… æ­£å¸¸</span>
                    </div>
                    <div class="info-grid">
                        <div class="info-label">åŠŸèƒ½ï¼š</div>
                        <div class="info-value">è°ƒè¯•æ¥å£ï¼Œä»…æå–åŸå§‹ç›®å½•ï¼Œä¸è¿›è¡ŒLLMæ¸…æ´—ï¼ˆæ”¯æŒPDFå’ŒEPUBï¼‰</div>
                        <div class="info-label">è¾“å…¥ï¼š</div>
                        <div class="info-value">æ–‡ä»¶ä¸Šä¼ </div>
                        <div class="info-label">è¾“å‡ºï¼š</div>
                        <div class="info-value">åŸå§‹ç›®å½•åˆ—è¡¨</div>
                    </div>
                    <div class="solution">
                        <h4>è§£å†³çš„é—®é¢˜</h4>
                        <p>ç”¨äºè°ƒè¯•ï¼ŒæŸ¥çœ‹PDF/EPUBçš„åŸå§‹ç›®å½•ç»“æ„ï¼Œä¸ç»è¿‡LLMå¤„ç†ï¼Œä¾¿äºæ’æŸ¥é—®é¢˜</p>
                    </div>
                </div>

                <div class="api-item">
                    <div class="api-title">
                        <span class="method post">POST</span>
                        <code>/api/parse/extract</code>
                        <span class="status-badge status-ok">âœ… å·²ä¿®å¤</span>
                    </div>
                    <div class="info-grid">
                        <div class="info-label">åŠŸèƒ½ï¼š</div>
                        <div class="info-value">æå–å†…å®¹æ¥å£ï¼ˆæ”¯æŒPDFå’ŒEPUBï¼‰</div>
                        <div class="info-label">è¾“å…¥ï¼š</div>
                        <div class="info-value">cleaned_tocï¼ˆæ¸…æ´—åçš„ç›®å½•ï¼‰ã€æ–‡ä»¶ä¸Šä¼ </div>
                        <div class="info-label">è¾“å‡ºï¼š</div>
                        <div class="info-value">ç« èŠ‚å†…å®¹åˆ—è¡¨</div>
                    </div>
                    <div class="problem-history">
                        <h4>é—®é¢˜å†å²</h4>
                        <div class="problem-item error">EPUBå†…å®¹æå–é—®é¢˜ï¼šåŒæ ·å­˜åœ¨BytesIOé—®é¢˜</div>
                        <div class="problem-item fix">ä¿®å¤æ–¹æ¡ˆï¼šä½¿ç”¨ä¸´æ—¶æ–‡ä»¶æ–¹å¼ï¼ˆè§ä»£ç 3093-3100è¡Œï¼‰</div>
                    </div>
                    <div class="solution">
                        <h4>è§£å†³çš„é—®é¢˜</h4>
                        <p>æ ¹æ®æ¸…æ´—åçš„ç›®å½•ï¼Œä»PDF/EPUBæ–‡ä»¶ä¸­æå–æ¯ä¸ªç« èŠ‚çš„æ­£æ–‡å†…å®¹ï¼Œå¹¶ç»Ÿè®¡å­—æ•°</p>
                    </div>
                </div>

                <div class="api-item">
                    <div class="api-title">
                        <span class="method post">POST</span>
                        <code>/api/parse</code>
                        <span class="status-badge status-warning">âš ï¸ æ—§æ¥å£</span>
                    </div>
                    <div class="info-grid">
                        <div class="info-label">åŠŸèƒ½ï¼š</div>
                        <div class="info-value">è§£æPDFæ–‡æ¡£ï¼ˆæ—§æ¥å£ï¼Œä»…æ”¯æŒPDFï¼‰</div>
                        <div class="info-label">è¾“å…¥ï¼š</div>
                        <div class="info-value">æ–‡ä»¶ä¸Šä¼ </div>
                        <div class="info-label">è¾“å‡ºï¼š</div>
                        <div class="info-value">è§£æç»“æœ</div>
                    </div>
                    <div class="problem-history">
                        <h4>é—®é¢˜</h4>
                        <p>ä»…æ”¯æŒPDFï¼Œä¸æ”¯æŒEPUBï¼ŒåŠŸèƒ½å·²è¢«æ¥å£1-3æ›¿ä»£</p>
                    </div>
                    <div class="solution">
                        <h4>å»ºè®®</h4>
                        <p>ä½¿ç”¨æ¥å£1-3çš„ç»„åˆæµç¨‹ï¼ˆclean_toc â†’ extractï¼‰</p>
                    </div>
                </div>

                <h3>äºŒã€æç¤ºè¯ç›¸å…³æ¥å£ â­ æ ¸å¿ƒé…ç½®æ¥å£</h3>

                <div class="api-item">
                    <div class="api-title">
                        <span class="method get">GET</span>
                        <code>/api/settings/prompt_parts</code>
                        <span class="status-badge status-ok">âœ… æ­£å¸¸</span>
                        <span class="status-badge status-important">â­ é‡è¦</span>
                    </div>
                    <div class="info-grid">
                        <div class="info-label">åŠŸèƒ½ï¼š</div>
                        <div class="info-value">è·å–åˆ†è§£åçš„æç¤ºè¯å„éƒ¨åˆ†</div>
                        <div class="info-label">è¾“å‡ºï¼š</div>
                        <div class="info-value">intro_prompt, body_prompt, quiz_prompt, question_prompt</div>
                    </div>
                    <div class="solution">
                        <h4>è§£å†³çš„é—®é¢˜</h4>
                        <p>å°†å®Œæ•´çš„æç¤ºè¯æ‹†åˆ†ä¸º4ä¸ªéƒ¨åˆ†ï¼ˆå¯¼è¯»ã€æ­£æ–‡ã€é€‰æ‹©é¢˜ã€æ€è€ƒé¢˜ï¼‰ï¼Œä¾¿äºåˆ†åˆ«è°ƒä¼˜å’Œç®¡ç†</p>
                        <div class="code-block">
intro_prompt: ä¸ªæ€§åŒ–å¯¼è¯»æ‘˜è¦ï¼ˆ150-300å­—ï¼‰
body_prompt: æ­£æ–‡è®²è§£ï¼ˆæ ¹æ®å¯†åº¦20%/50%/70%ï¼‰
quiz_prompt: çŸ¥è¯†ç‚¹é€‰æ‹©é¢˜ï¼ˆ3-5é¢˜ï¼‰
question_prompt: ä¸€ä¸ªå¼ºæœ‰åŠ›çš„æ€è€ƒé—®é¢˜
                        </div>
                    </div>
                </div>

                <div class="api-item">
                    <div class="api-title">
                        <span class="method post">POST</span>
                        <code>/api/settings/prompt_parts</code>
                        <span class="status-badge status-ok">âœ… æ­£å¸¸</span>
                        <span class="status-badge status-important">â­ é‡è¦</span>
                    </div>
                    <div class="info-grid">
                        <div class="info-label">åŠŸèƒ½ï¼š</div>
                        <div class="info-value">ä¿å­˜åˆ†è§£åçš„æç¤ºè¯å„éƒ¨åˆ†</div>
                        <div class="info-label">è¾“å…¥ï¼š</div>
                        <div class="info-value">intro_prompt, body_prompt, quiz_prompt, question_prompt</div>
                        <div class="info-label">è¾“å‡ºï¼š</div>
                        <div class="info-value">status</div>
                    </div>
                    <div class="solution">
                        <h4>è§£å†³çš„é—®é¢˜</h4>
                        <p>ä¿å­˜ä¿®æ”¹åçš„æç¤ºè¯å„éƒ¨åˆ†ï¼ŒæŒä¹…åŒ–åˆ°æ•°æ®åº“ï¼Œä¾›åç»­ç”Ÿæˆä½¿ç”¨</p>
                    </div>
                </div>

                <h3>ä¸‰ã€å†…å®¹ç”Ÿæˆç›¸å…³æ¥å£</h3>

                <div class="api-item">
                    <div class="api-title">
                        <span class="method post">POST</span>
                        <code>/api/generate</code>
                        <span class="status-badge status-ok">âœ… å·²ä¼˜åŒ–</span>
                    </div>
                    <div class="info-grid">
                        <div class="info-label">åŠŸèƒ½ï¼š</div>
                        <div class="info-value">ç”Ÿæˆç« èŠ‚è§£è¯»å†…å®¹ï¼ˆå®Œæ•´ç‰ˆï¼ŒåŒ…å«5ä¸ªéƒ¨åˆ†ï¼‰</div>
                        <div class="info-label">è¾“å…¥ï¼š</div>
                        <div class="info-value">chapterTitle, chapterText, userProfession, readingGoal, focus, density, intro_promptï¼ˆå¯é€‰ï¼‰, body_promptï¼ˆå¯é€‰ï¼‰, quiz_promptï¼ˆå¯é€‰ï¼‰, question_promptï¼ˆå¯é€‰ï¼‰</div>
                        <div class="info-label">è¾“å‡ºï¼š</div>
                        <div class="info-value">resultï¼ˆè§£è¯»ç»“æœï¼ŒåŒ…å«reasoning_contentå’Œcontentï¼‰, record_id</div>
                    </div>
                    <div class="problem-history">
                        <h4>é—®é¢˜å†å²</h4>
                        <div class="problem-item error">JSONè§£æå¤±è´¥ï¼šLLMè¿”å›çš„JSONä¸­åŒ…å«æ§åˆ¶å­—ç¬¦ï¼ˆASCII 0-31ï¼‰ï¼Œå¯¼è‡´è§£æå¤±è´¥</div>
                        <div class="problem-item fix">ä¿®å¤æ–¹æ¡ˆï¼šå®ç°äº†<code>_fix_json_string()</code>å’Œ<code>_fix_json_control_chars()</code>å‡½æ•°ï¼Œè‡ªåŠ¨ä¿®å¤æ§åˆ¶å­—ç¬¦ï¼ˆè§ä»£ç 1107-1700è¡Œï¼‰</div>
                        <div class="problem-item error">æ€è€ƒè¿‡ç¨‹æå–é—®é¢˜ï¼šéœ€è¦ä»LLMå“åº”ä¸­æå–<code>reasoning_content</code>ï¼ˆæ€è€ƒè¿‡ç¨‹ï¼‰å’Œ<code>content</code>ï¼ˆæœ€ç»ˆç»“æœï¼‰</div>
                        <div class="problem-item fix">ä¿®å¤æ–¹æ¡ˆï¼šå®ç°äº†<code>_add_debug_info_to_result()</code>å‡½æ•°ï¼Œè‡ªåŠ¨æå–å’Œåˆ†ç¦»æ€è€ƒè¿‡ç¨‹å’Œæœ€ç»ˆç»“æœ</div>
                    </div>
                    <div class="solution">
                        <h4>è§£å†³çš„é—®é¢˜</h4>
                        <p>æ ¹æ®ç”¨æˆ·ç”»åƒï¼ˆèŒä¸šã€é˜…è¯»ç›®æ ‡ã€å…³æ³¨ç‚¹ã€å¯†åº¦ï¼‰å’Œç« èŠ‚å†…å®¹ï¼Œç”Ÿæˆä¸ªæ€§åŒ–çš„è§£è¯»ï¼ŒåŒ…å«å¯¼è¯»ã€æ­£æ–‡è®²è§£ã€åº”ç”¨åœºæ™¯ã€é€‰æ‹©é¢˜ã€æ€è€ƒé¢˜</p>
                    </div>
                </div>

                <h3>å…­ã€æ–‡ç« é‡æ„ç›¸å…³æ¥å£</h3>

                <div class="api-item">
                    <div class="api-title">
                        <span class="method post">POST</span>
                        <code>/api/restructure/split-article</code>
                        <span class="status-badge status-ok">âœ… æ ‡å‡†æ¥å£</span>
                        <span class="status-badge status-important">â­ æ¨èä½¿ç”¨</span>
                    </div>
                    <div class="info-grid">
                        <div class="info-label">åŠŸèƒ½ï¼š</div>
                        <div class="info-value">æ ‡å‡†æ–‡ç« åˆ†å‰²æ¥å£</div>
                        <div class="info-label">è¾“å…¥ï¼š</div>
                        <div class="info-value">textï¼ˆæ–‡æœ¬å†…å®¹ï¼Œå¿…éœ€ï¼‰, max_lengthï¼ˆæ¯æ®µæœ€å¤§å­—æ•°ï¼Œå¿…éœ€ï¼‰, titleï¼ˆå¯é€‰ï¼Œé»˜è®¤"æœªå‘½åæ–‡ç« "ï¼‰</div>
                        <div class="info-label">è¾“å‡ºï¼š</div>
                        <div class="info-value">segmentsï¼ˆåˆ†å‰²åçš„æ®µè½åˆ—è¡¨ï¼Œæ¯ä¸ªåŒ…å«title, content, word_countï¼‰</div>
                    </div>
                    <div class="solution">
                        <h4>è§£å†³çš„é—®é¢˜</h4>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                            <li><strong>é•¿æ–‡ç« åˆ†å‰²</strong>ï¼šå°†è¶…è¿‡å­—æ•°é™åˆ¶çš„é•¿æ–‡ç« åˆ†å‰²æˆå¤šä¸ªæ®µè½</li>
                            <li><strong>è¯­ä¹‰å®Œæ•´æ€§</strong>ï¼šä½¿ç”¨TextTilingé£æ ¼çš„è¯­ä¹‰åˆ†å‰²ï¼Œä¿æŒè¯é¢˜å®Œæ•´æ€§</li>
                            <li><strong>ä¸¥æ ¼å­—æ•°æ§åˆ¶</strong>ï¼šç¡®ä¿æ¯ä¸ªæ®µè½ä¸è¶…è¿‡æŒ‡å®šçš„å­—æ•°é™åˆ¶</li>
                            <li><strong>æ™ºèƒ½æ ‡é¢˜ç”Ÿæˆ</strong>ï¼šä¸ºæ¯ä¸ªåˆ†å‰²åçš„æ®µè½è‡ªåŠ¨ç”Ÿæˆè¯­ä¹‰åŒ–çš„æ ‡é¢˜ï¼ˆä½¿ç”¨flashæ¨¡å‹ï¼Œé€Ÿåº¦å¿«ï¼‰</li>
                        </ul>
                        <div class="code-block" style="margin-top: 1rem;">
å·¥ä½œæµç¨‹ï¼š
1. è¯­ä¹‰åˆ†å‰²ï¼šä½¿ç”¨ semantic_segmentation() è¯†åˆ«è¯é¢˜è¾¹ç•Œ
2. å­—æ•°æ‰“åŒ…ï¼šä½¿ç”¨ pack_segments_by_word_count() æŒ‰å­—æ•°é™åˆ¶é‡æ–°æ‰“åŒ…
3. æ ‡é¢˜ç”Ÿæˆï¼šä¸ºæ¯ä¸ªæ‰“åŒ…å—è°ƒç”¨LLMç”Ÿæˆæ ‡é¢˜
                        </div>
                        <p style="margin-top: 1rem;"><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šä¹¦ç±ç« èŠ‚é‡æ„ã€é•¿æ–‡ç« åˆ†æ®µã€å†…å®¹é‡ç»„</p>
                    </div>
                </div>

                <h3>äº”ã€æ’­å®¢ç›¸å…³æ¥å£</h3>

                <div class="api-item">
                    <div class="api-title">
                        <span class="method post">POST</span>
                        <code>/api/podcast/generate</code>
                        <span class="status-badge status-error">âŒ æœ‰é—®é¢˜</span>
                    </div>
                    <div class="info-grid">
                        <div class="info-label">åŠŸèƒ½ï¼š</div>
                        <div class="info-value">ç”Ÿæˆæ’­å®¢éŸ³é¢‘</div>
                        <div class="info-label">è¾“å…¥ï¼š</div>
                        <div class="info-value">text, voice_type</div>
                        <div class="info-label">è¾“å‡ºï¼š</div>
                        <div class="info-value">éŸ³é¢‘æ•°æ®</div>
                    </div>
                    <div class="problem-history">
                        <h4>é—®é¢˜å†å²</h4>
                        <div class="problem-item error">é”™è¯¯çš„APIç«¯ç‚¹ï¼šä½¿ç”¨äº†<code>wss://openspeech.bytedance.com/api/v3/tts/bidirection</code>ï¼ˆé€šç”¨TTSç«¯ç‚¹ï¼‰</div>
                        <div class="problem-item fix">æ­£ç¡®ç«¯ç‚¹ï¼šåº”è¯¥æ˜¯<code>wss://openspeech.bytedance.com/api/v3/sami/podcasttts</code>ï¼ˆæ’­å®¢ä¸“ç”¨ç«¯ç‚¹ï¼‰</div>
                        <div class="problem-item error">é”™è¯¯çš„åè®®ï¼šä½¿ç”¨äº†ç®€å•çš„JSON WebSocketæ¶ˆæ¯</div>
                        <div class="problem-item fix">æ­£ç¡®åè®®ï¼šéœ€è¦ä½¿ç”¨è‡ªå®šä¹‰äºŒè¿›åˆ¶åè®®ï¼ˆprotocolsæ¨¡å—ï¼‰</div>
                        <div class="problem-item error">ç¼ºå°‘å¿…è¦çš„è¯·æ±‚å¤´ï¼šç¼ºå°‘<code>X-Api-App-Key: "aGjiRDfUWi"</code>ï¼ˆå›ºå®šå€¼ï¼‰</div>
                        <div class="problem-item error">é”™è¯¯çš„WebSocketåº“ï¼šä½¿ç”¨äº†<code>websocket-client</code>ï¼ˆåŒæ­¥åº“ï¼‰</div>
                        <div class="problem-item fix">æ­£ç¡®åº“ï¼šåº”è¯¥ä½¿ç”¨<code>websockets</code>ï¼ˆå¼‚æ­¥åº“ï¼‰</div>
                    </div>
                    <div class="solution">
                        <h4>å½“å‰çŠ¶æ€</h4>
                        <p>ä»£ç ä¸­å·²å¯¼å…¥protocolsæ¨¡å—å’Œwebsocketsï¼Œä½†å¯èƒ½ä»æœ‰é—®é¢˜ï¼Œå»ºè®®æµ‹è¯•åå†ä½¿ç”¨</p>
                        <p style="margin-top: 0.5rem;"><strong>å‚è€ƒæ–‡æ¡£</strong>ï¼šè§<code>PODCAST_ISSUE_SUMMARY.md</code></p>
                    </div>
                </div>

            </section>

            <section id="functions">
                <h2>ğŸ”§ æ ¸å¿ƒå‡½æ•°åˆ—è¡¨</h2>

                <h3>ä¸€ã€æ–‡ç« åˆ†å‰²ç›¸å…³å‡½æ•°</h3>

                <div class="func-item">
                    <div class="api-title">
                        <code>split_article_into_segments()</code>
                        <span class="status-badge status-ok">âœ… æ ¸å¿ƒå‡½æ•°ï¼Œå·²ä¼˜åŒ–</span>
                        <span class="status-badge status-important">â­</span>
                    </div>
                    <div class="info-grid">
                        <div class="info-label">åŠŸèƒ½ï¼š</div>
                        <div class="info-value">å°†æ–‡ç« åˆ†å‰²æˆå¤šä¸ªæ®µè½ï¼Œæ¯ä¸ªæ®µè½ä¸è¶…è¿‡æŒ‡å®šå­—æ•°ï¼Œå¹¶ä¸ºæ¯ä¸ªæ®µè½ç”Ÿæˆæ ‡é¢˜</div>
                        <div class="info-label">è¾“å…¥ï¼š</div>
                        <div class="info-value">title, content, max_word_countï¼ˆé»˜è®¤10000ï¼‰, api_keyï¼ˆå¯é€‰ï¼Œä»ç¯å¢ƒå˜é‡è·å–ï¼‰, similarity_thresholdï¼ˆé»˜è®¤0.3ï¼‰</div>
                        <div class="info-label">è¾“å‡ºï¼š</div>
                        <div class="info-value">List[Dict] - æ¯ä¸ªå­—å…¸åŒ…å«titleï¼ˆç”Ÿæˆçš„æ ‡é¢˜ï¼‰, contentï¼ˆæ®µè½å†…å®¹ï¼‰, word_countï¼ˆå­—æ•°ï¼‰</div>
                    </div>
                    <div class="problem-history">
                        <h4>é—®é¢˜å†å²</h4>
                        <div class="problem-item error">åˆå§‹å®ç°é—®é¢˜ï¼šç›´æ¥è®©LLMæŒ‰å­—æ•°åˆ†å‰²ï¼ŒLLMæ— æ³•ç²¾ç¡®æ§åˆ¶å­—æ•°ï¼Œå¯¼è‡´æŸäº›æ®µè½è¶…è¿‡é™åˆ¶</div>
                        <div class="problem-item fix">ä¿®å¤æ–¹æ¡ˆï¼šæ”¹ä¸ºä¸‰æ­¥æµç¨‹ï¼šè¯­ä¹‰åˆ†å‰² â†’ å­—æ•°æ‰“åŒ… â†’ æ ‡é¢˜ç”Ÿæˆï¼Œç¡®ä¿ä¸¥æ ¼å­—æ•°æ§åˆ¶</div>
                        <div class="problem-item fix">æ¨¡å‹ä¼˜åŒ–ï¼šæ ‡é¢˜ç”Ÿæˆä½¿ç”¨<code>doubao-seed-1-6-flash-250828</code>ï¼ˆflashæ¨¡å‹ï¼‰ï¼Œé€Ÿåº¦å¿«</div>
                    </div>
                    <div class="solution">
                        <h4>è§£å†³çš„é—®é¢˜</h4>
                        <p>å°†é•¿æ–‡ç« æ™ºèƒ½åˆ†å‰²ï¼Œä¿æŒè¯­ä¹‰å®Œæ•´æ€§ï¼Œä¸¥æ ¼å­—æ•°æ§åˆ¶ï¼Œè‡ªåŠ¨ç”Ÿæˆæ ‡é¢˜</p>
                    </div>
                </div>

            </section>

            <section id="pages">
                <h2>ğŸ“ é¡µé¢è·¯ç”±</h2>
                <div class="page-route"><strong>P1.</strong> GET / æˆ– GET /index.html - é¦–é¡µ</div>
                <div class="page-route"><strong>P2.</strong> GET /parser_test_page.html - PDFè§£ææµ‹è¯•é¡µé¢</div>
                <div class="page-route"><strong>P3.</strong> GET /aigen_test_page.html - AIç”Ÿæˆæµ‹è¯•é¡µé¢</div>
                <div class="page-route"><strong>P4.</strong> GET /book_restructure_page.html - ä¹¦ç±é‡æ„é¡µé¢</div>
                <div class="page-route"><strong>P5.</strong> GET /admin.html - ç®¡ç†é¡µé¢</div>
                <div class="page-route"><strong>P6.</strong> GET /admin_books.html - ä¹¦ç±ç®¡ç†é¡µé¢</div>
                <div class="page-route"><strong>P7.</strong> GET /test_thinking.html - æ·±åº¦æ€è€ƒæ¨¡å‹æµ‹è¯•é¡µé¢</div>
                <div class="page-route"><strong>P8.</strong> GET /test_doubao_thinking.html - è±†åŒ…æ·±åº¦æ€è€ƒèƒ½åŠ›çº¯æµ‹è¯•é¡µé¢</div>
            </section>

            <section id="summary" class="summary-section">
                <h2>ğŸ” ä¸»è¦é—®é¢˜æ€»ç»“</h2>

                <h3>å·²ä¿®å¤çš„é—®é¢˜</h3>
                <div class="summary-grid">
                    <div class="summary-item">
                        <h4>1. EPUBè§£æBytesIOé—®é¢˜</h4>
                        <p>æ¥å£1ã€3ï¼šä½¿ç”¨ä¸´æ—¶æ–‡ä»¶è§£å†³BytesIOé—®é¢˜</p>
                    </div>
                    <div class="summary-item">
                        <h4>2. JSONæ§åˆ¶å­—ç¬¦é—®é¢˜</h4>
                        <p>æ¥å£12ã€å‡½æ•°F9ï¼šå®ç°äº†è‡ªåŠ¨ä¿®å¤æ§åˆ¶å­—ç¬¦çš„å‡½æ•°</p>
                    </div>
                    <div class="summary-item">
                        <h4>3. æ–‡ç« åˆ†å‰²å­—æ•°æ§åˆ¶</h4>
                        <p>æ¥å£17ã€å‡½æ•°F1ï¼šæ”¹ä¸ºä¸‰æ­¥æµç¨‹ç¡®ä¿ä¸¥æ ¼å­—æ•°æ§åˆ¶</p>
                    </div>
                </div>

                <h3 style="margin-top: 2rem;">å·²çŸ¥é—®é¢˜</h3>
                <div class="summary-grid">
                    <div class="summary-item">
                        <h4>1. æ’­å®¢APIé—®é¢˜</h4>
                        <p>æ¥å£16ï¼šä½¿ç”¨äº†é”™è¯¯çš„ç«¯ç‚¹å’Œåè®®ï¼Œéœ€è¦ä¿®å¤</p>
                    </div>
                    <div class="summary-item">
                        <h4>2. TTS V1 APIé—®é¢˜</h4>
                        <p>V1 APIå¯èƒ½ä¸æ”¯æŒï¼Œå»ºè®®ä½¿ç”¨V3 WebSocketæ¥å£</p>
                    </div>
                </div>
            </section>

            <section id="recommendations" class="recommendations">
                <h2>ğŸ“Œ ä½¿ç”¨å»ºè®®</h2>

                <h3>æ¨èæµç¨‹</h3>
                <div class="recommendation-item">
                    <strong>æç¤ºè¯é…ç½®</strong>ï¼šä½¿ç”¨æ¥å£8è·å–åˆ†è§£åçš„æç¤ºè¯ï¼Œä½¿ç”¨æ¥å£9ä¿å­˜ä¿®æ”¹åçš„æç¤ºè¯ï¼Œé¿å…ä½¿ç”¨æ¥å£10-11ï¼ˆæ—§æ¥å£ï¼‰
                </div>
                <div class="recommendation-item">
                    <strong>æ–‡æ¡£è§£æ</strong>ï¼šä½¿ç”¨æ¥å£1æ¸…æ´—ç›®å½•ï¼Œä½¿ç”¨æ¥å£3æå–å†…å®¹ï¼Œä½¿ç”¨æ¥å£5æ‰¹é‡å…¥åº“ï¼ˆæˆ–æ¥å£6-7åˆ†æ­¥å…¥åº“ï¼‰ï¼Œé¿å…ä½¿ç”¨æ¥å£4ï¼ˆæ—§æ¥å£ï¼Œä»…æ”¯æŒPDFï¼‰
                </div>
                <div class="recommendation-item">
                    <strong>å†…å®¹ç”Ÿæˆ</strong>ï¼šä½¿ç”¨æ¥å£12ç”Ÿæˆå®Œæ•´è§£è¯»ï¼Œä½¿ç”¨æ¥å£13è°ƒè¯•å•ä¸ªéƒ¨åˆ†
                </div>
                <div class="recommendation-item">
                    <strong>æ–‡ç« é‡æ„</strong>ï¼šä½¿ç”¨æ¥å£17ï¼ˆsplit-articleï¼‰è¿›è¡Œæ–‡ç« åˆ†å‰²ï¼Œé¿å…ä½¿ç”¨æ¥å£18ï¼ˆæ—§æ¥å£ï¼Œå‚æ•°ä¸ä¸€è‡´ï¼‰
                </div>
                <div class="recommendation-item">
                    <strong>ç®¡ç†æ“ä½œ</strong>ï¼šä½¿ç”¨æ¥å£19-22è¿›è¡Œä¹¦ç±ç®¡ç†
                </div>
                <div class="recommendation-item avoid">
                    <strong>æµ‹è¯•</strong>ï¼šä½¿ç”¨æ¥å£23æµ‹è¯•è±†åŒ…æ·±åº¦æ€è€ƒæ¨¡å‹ï¼Œé¿å…ä½¿ç”¨æ¥å£16ï¼ˆæ’­å®¢APIæœ‰é—®é¢˜ï¼‰
                </div>

                <h3 style="margin-top: 2rem;">æœ€ä½³å®è·µ</h3>
                <ul style="margin-left: 1.5rem; margin-top: 1rem;">
                    <li><strong>æ–°é¡¹ç›®</strong>ï¼šä¼˜å…ˆä½¿ç”¨æ ‡è®°ä¸ºâœ…çš„æ¥å£</li>
                    <li><strong>æ—§é¡¹ç›®è¿ç§»</strong>ï¼šé€æ­¥ä»æ—§æ¥å£è¿ç§»åˆ°æ–°æ¥å£</li>
                    <li><strong>é—®é¢˜æ’æŸ¥</strong>ï¼šé‡åˆ°é—®é¢˜å…ˆæŸ¥çœ‹"é—®é¢˜å†å²"éƒ¨åˆ†</li>
                </ul>
            </section>

            <section>
                <h2>ğŸ¯ æ¥å£çŠ¶æ€æ ‡è®°è¯´æ˜</h2>
                <div class="info-grid" style="grid-template-columns: 1fr 3fr;">
                    <div><span class="status-badge status-ok">âœ… æ­£å¸¸/å·²ä¿®å¤</span></div>
                    <div>æ¥å£å·¥ä½œæ­£å¸¸ï¼Œæˆ–å·²ä¿®å¤å†å²é—®é¢˜</div>
                    <div><span class="status-badge status-warning">âš ï¸ å…¼å®¹æ—§æ¥å£</span></div>
                    <div>æ—§æ¥å£ï¼Œå»ºè®®ä½¿ç”¨æ–°æ¥å£</div>
                    <div><span class="status-badge status-error">âŒ æœ‰é—®é¢˜</span></div>
                    <div>æ¥å£å­˜åœ¨é—®é¢˜ï¼Œä¸å»ºè®®ä½¿ç”¨</div>
                    <div><span class="status-badge status-important">â­ ç‰¹åˆ«é‡è¦</span></div>
                    <div>æ ¸å¿ƒåŠŸèƒ½æ¥å£</div>
                </div>
            </section>
        </div>
    </div>
</body>
</html>

